@using DailyLoan.Library.Status

<script src="~/lib/js/fileinput.js" type="text/javascript"></script>
<script src="~/lib/js/piexif.js" type="text/javascript"></script>
<script src="~/lib/js/sortable.js" type="text/javascript"></script>
<script src="~/lib/js/fas/theme.js" type="text/javascript"></script>
<script src="~/lib/js/th.js" type="text/javascript"></script>

<div class="card-body bg-light p-3 rounded ">
    <div class="input-group mb-3 input-group-sm">
        <input id="searchidcard" type="text" class="form-control" placeholder="เลขบัตรประชาชน">
        <input id="searchaddress" type="text" class="form-control" placeholder="สถานที่">

    </div>
    <div class="input-group mb-3 input-group-sm">
        <input id="searchfname" type="text" class="form-control" placeholder="ชื่อ">
        <input id="searchlname" type="text" class="form-control" placeholder="นามสกุล">
    </div>
    <div class="input-group mb-3 input-group-sm justify-content-center">
        <button type="button" onclick="search();" class="btn btn-info btn-sm">
            <i class="fa fa-search"></i>
            ค้นหา
        </button>
        <button type="button" id="addmodal" class="btn btn-success btn-sm" data-bs-toggle="modal" data-bs-target="#addcontract">
            <i class="fa fa-plus-circle"></i>
            เพิ่มสัญญากู้
        </button>
    </div>
    <!-- The Modal addcustomer -->
    <div class="modal" id="addcontract">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <!-- Modal Header -->
                <div class="modal-header" style="background-color:#ff9800;color:#000;">
                    <h4 class="modal-title">เพิ่มสัญญากู้</h4>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <!-- Modal body -->
                <div class="modal-body">
                    <form>
                        <div class="card-body bg-light p-3 rounded">
                            <div class="input-group mb-3 input-group-sm">
                                <select class="form-select form-select-sm" id="addcustype" name="addcustype" style="width: 90px !important; min-width:90px; max-width: 90px;">
                                    <option value="1">คนกู้</option>
                                    <option value="2">คนค้ำ</option>
                                </select>
                                <input type="text" class="form-control" id="addidcardsearch" placeholder="เลขบัตรประชาชน">
                                <input type="text" class="form-control" id="addnamesearch" placeholder="ชื่อ-นามสกุล">
                                <button type="button" class="btn btn-info btn-sm" id="addsearch">
                                    <i class="fa fa-search"></i>
                                    ค้นหา
                                </button>
                            </div>
                            <div class="accordion" id="addsearchpanel">
                                <div class="accordion-item">
                                    <div id="addsearchpanelchild" class="accordion-collapse collapse" aria-labelledby="addsearchitem">
                                        <!-- <div id="addsearchitem" class="accordion-body">
                                        </div>-->
                                        <label for="inputEmail4">เลือกลูกค้า</label>
                                        <select class="form-select form-select-sm" id="addsearchitem" name="addsearchitem">
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="accordion" id="accordionPanelsStayOpenExampleAdd">
                                <div class="accordion-item">
                                    <h2 class="accordion-header" id="panelsStayOpen-headingOneAdd">
                                        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseOneAdd" aria-expanded="false" aria-controls="panelsStayOpen-collapseOneAdd">
                                            ข้อมูลคนกู้
                                        </button>
                                    </h2>
                                    <div id="panelsStayOpen-collapseOneAdd" class="accordion-collapse collapse show" aria-labelledby="panelsStayOpen-headingOneAdd">
                                        <div class="accordion-body">
                                            <form>
                                                <div class="form-row">
                                                    <div class="container-fluid">
                                                        <div class="row">
                                                            <div class="col-md-6 pb-3">
                                                                <input type="hidden" id="addcid" />
                                                                <label for="addfirstname">ชื่อ</label>
                                                                <input type="text" class="form-control form-control-sm" id="addfirstname" placeholder="ชื่อ" readonly>
                                                            </div>
                                                            <div class="col-md-6 pb-3">
                                                                <label for="addlastname">นามสกุล</label>
                                                                <input type="text" class="form-control form-control-sm" id="addlastname" placeholder="นามสกุล" readonly>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-row">
                                                    <div class="container-fluid">
                                                        <div class="row">
                                                            <div class="col-md-6 pb-3">
                                                                <label for="addnickname">ชื่อเล่น</label>
                                                                <input type="text" class="form-control form-control-sm" id="addnickname" placeholder="ชื่อเล่น" readonly>
                                                            </div>
                                                            <div class="col-md-6 pb-3">
                                                                <label for="addidcard">เลขบัตรประจำตัวประชาชน</label>
                                                                <input type="text" class="form-control form-control-sm" id="addidcard" placeholder="เลขบัตรประจำตัวประชาชน" readonly>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-row">
                                                    <div class="container-fluid">
                                                        <div class="row">
                                                            <div class="col-md-6 pb-3">
                                                                <label for="addphone1">เบอร์โทร 1</label>
                                                                <input type="text" class="form-control form-control-sm" id="addphone1" placeholder="เบอร์โทร 1" readonly>
                                                            </div>
                                                            <div class="col-md-6 pb-3">
                                                                <label for="addphone2">เบอร์โทร 2</label>
                                                                <input type="text" class="form-control form-control-sm" id="addphone2" placeholder="เบอร์โทร 2" readonly>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                @if (ViewBag.UserAccess == StatusUserAccess.UserAccess_Superadmin.ToString())
                                                {
                                                    <div class="form-row">
                                                        <div class="container-fluid">
                                                            <div class="row">
                                                                <div class="col-md-6 pb-3">
                                                                    <label for="addhouse">บ้าน</label>
                                                                    <input type="text" class="form-control form-control-sm" id="addhouse" placeholder="" readonly>
                                                                </div>
                                                                <div class="col-md-6 pb-3">
                                                                    <label for="addcustomerline">สาย</label>
                                                                    <input type="text" class="form-control form-control-sm" id="addcustomerline" placeholder="" readonly>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                }
                                                else if (ViewBag.UserAccess == StatusUserAccess.UserAccess_Admin.ToString())
                                                {
                                                    <div class="form-row">
                                                        <div class="container-fluid">
                                                            <div class="row">
                                                                <div class="col-md-6 pb-3">
                                                                    <label for="addcustomerline">สาย</label>
                                                                    <input type="text" class="form-control form-control-sm" id="addcustomerline" placeholder="" readonly>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                }
                                                <div class="form-row">
                                                    <div class="container-fluid">
                                                        <div class="row">
                                                            <div class="col-md-6 pb-3">
                                                                <label for="addaddress">สถานที่</label>
                                                                <input type="text" class="form-control form-control-sm" id="addaddress" placeholder="สถานที่" readonly>
                                                            </div>
                                                            <div class="col-md-6 pb-3">
                                                                <label for="addshortaddress">สถานที่ย่อ</label>
                                                                <input type="text" class="form-control form-control-sm" id="addshortaddress" placeholder="สถานที่" readonly>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-row">
                                                    <div class="container-fluid">
                                                        <div class="row">
                                                            <div class="col-md-6 pb-3">
                                                                <input type="radio" id="addstatus1" name="addstatus" value="1" disabled>
                                                                <label for="addstatus1">ดี</label>
                                                                <input type="radio" id="addstatus2" name="addstatus" value="2" disabled>
                                                                <label for="addstatus2">แย่</label>
                                                                <input type="radio" id="addstatus3" name="addstatus" value="3" disabled>
                                                                <label for="addstatus3">เสีย</label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-row">
                                                    <div class="container-fluid">
                                                        <div class="row">
                                                            <div class="col pb-3">
                                                                <label for="inputEmail4">รูปบัตรประชาชน</label>
                                                                <img src="~/lib/images/user.png" style="width:80px;" class="mx-auto d-block">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                                <div class="accordion-item">
                                    <h2 class="accordion-header" id="panelsStayOpen-headingTwoAdd">
                                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseTwoAdd" aria-expanded="false" aria-controls="panelsStayOpen-collapseTwoAdd">
                                            ข้อมูลคนค้ำ
                                        </button>
                                    </h2>
                                    <div id="panelsStayOpen-collapseTwoAdd" class="accordion-collapse collapse" aria-labelledby="panelsStayOpen-headingTwoAdd">
                                        <div class="accordion-body">
                                            <form>
                                                <div class="form-row">
                                                    <div class="container-fluid">
                                                        <div class="row">
                                                            <div class="col-md-6 pb-3">
                                                                <input type="hidden" id="addgid" />
                                                                <label for="addfirstname">ชื่อ</label>
                                                                <input type="text" class="form-control form-control-sm" id="addgfirstname" placeholder="ชื่อ" readonly>
                                                            </div>
                                                            <div class="col-md-6 pb-3">
                                                                <label for="addlastname">นามสกุล</label>
                                                                <input type="text" class="form-control form-control-sm" id="addglastname" placeholder="นามสกุล" readonly>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-row">
                                                    <div class="container-fluid">
                                                        <div class="row">
                                                            <div class="col-md-6 pb-3">
                                                                <label for="addnickname">ชื่อเล่น</label>
                                                                <input type="text" class="form-control form-control-sm" id="addgnickname" placeholder="ชื่อเล่น" readonly>
                                                            </div>
                                                            <div class="col-md-6 pb-3">
                                                                <label for="addidcard">เลขบัตรประจำตัวประชาชน</label>
                                                                <input type="text" class="form-control form-control-sm" id="addgidcard" placeholder="เลขบัตรประจำตัวประชาชน" readonly>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-row">
                                                    <div class="container-fluid">
                                                        <div class="row">
                                                            <div class="col-md-6 pb-3">
                                                                <label for="addphone1">เบอร์โทร 1</label>
                                                                <input type="text" class="form-control form-control-sm" id="addgphone1" placeholder="เบอร์โทร 1" readonly>
                                                            </div>
                                                            <div class="col-md-6 pb-3">
                                                                <label for="addphone2">เบอร์โทร 2</label>
                                                                <input type="text" class="form-control form-control-sm" id="addgphone2" placeholder="เบอร์โทร 2" readonly>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                @if (ViewBag.UserAccess == StatusUserAccess.UserAccess_Superadmin.ToString())
                                                {
                                                    <div class="form-row">
                                                        <div class="container-fluid">
                                                            <div class="row">
                                                                <div class="col-md-6 pb-3">
                                                                    <label for="addhouse">บ้าน</label>
                                                                    <input type="text" class="form-control form-control-sm" id="addghouse" placeholder="" readonly>
                                                                </div>
                                                                <div class="col-md-6 pb-3">
                                                                    <label for="addcustomerline">สาย</label>
                                                                    <input type="text" class="form-control form-control-sm" id="addgcustomerline" placeholder="" readonly>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                }
                                                else if (ViewBag.UserAccess == StatusUserAccess.UserAccess_Admin.ToString())
                                                {
                                                    <div class="form-row">
                                                        <div class="container-fluid">
                                                            <div class="row">
                                                                <div class="col-md-6 pb-3">
                                                                    <label for="addcustomerline">สาย</label>
                                                                    <input type="text" class="form-control form-control-sm" id="addgcustomerline" placeholder="" readonly>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                }
                                                <div class="form-row">
                                                    <div class="container-fluid">
                                                        <div class="row">
                                                            <div class="col-md-6 pb-3">
                                                                <label for="addaddress">สถานที่</label>
                                                                <input type="text" class="form-control form-control-sm" id="addgaddress" placeholder="สถานที่" readonly>
                                                            </div>
                                                            <div class="col-md-6 pb-3">
                                                                <label for="addshortaddress">สถานที่ย่อ</label>
                                                                <input type="text" class="form-control form-control-sm" id="addgshortaddress" placeholder="สถานที่" readonly>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-row">
                                                    <div class="container-fluid">
                                                        <div class="row">
                                                            <div class="col-md-6 pb-3">
                                                                <input type="radio" id="addgstatus1" name="addgstatus" value="1" disabled>
                                                                <label for="addgstatus1">ดี</label>
                                                                <input type="radio" id="addgstatus2" name="addgstatus" value="2" disabled>
                                                                <label for="addgstatus2">แย่</label>
                                                                <input type="radio" id="addgstatus3" name="addgstatus" value="3" disabled>
                                                                <label for="addgstatus3">เสีย</label>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-row">
                                                    <div class="container-fluid">
                                                        <div class="row">
                                                            <div class="col pb-3">
                                                                <label for="inputEmail4">รูปบัตรประชาชน</label>
                                                                <img src="~/lib/images/user.png" style="width:80px;" class="mx-auto d-block">
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                                <div class="accordion-item">
                                    <h2 class="accordion-header" id="panelsStayOpen-headingThreeAdd">
                                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseThreeAdd" aria-expanded="false" aria-controls="panelsStayOpen-collapseThreeAdd">
                                            ข้อมูลสัญญา
                                        </button>
                                    </h2>
                                    <div id="panelsStayOpen-collapseThreeAdd" class="accordion-collapse collapse" aria-labelledby="panelsStayOpen-headingThreeAdd">
                                        <div class="accordion-body">
                                            <div class="form-row">
                                                <div class="container-fluid">
                                                    <div class="row">
                                                        <div class="col-md-6 pb-3">
                                                            <label for="addcondate">วันที่</label>
                                                            <input type="text" class="form-control form-control-sm" id="addcondate" placeholder="วันที่" readonly>
                                                        </div>
                                                        <div class="col-md-6 pb-3">
                                                            <label for="addconamount">ยอดเงินขอกู้</label>
                                                            <input type="text" class="form-control form-control-sm" id="addconamount" placeholder="ยอดเงินขอกู้">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <!-- Modal footer -->
                <div class="modal-footer">
                    <button type="button" class="btn btn-success" onclick="saveadd()" data-bs-dismiss="modal">ขออนุมัติ</button>
                    <button type="button" class="btn btn-danger" data-bs-dismiss="modal">ปิด</button>
                </div>

            </div>
        </div>
    </div>
</div>
<!-- The Modal viewcontract -->
<div class="modal" id="viewcontract">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <!-- Modal Header -->
            <div class="modal-header" style="background-color:#ff9800;color:#000;">
                <h4 class="modal-title">ดูข้อมูลสัญญากู้</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <!-- Modal body -->
            <div class="modal-body">
                <form>
                    <div class="card-body bg-light p-3 rounded ">
                        <div class="accordion" id="accordionPanelsStayOpenExampleView">
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="panelsStayOpen-headingOneView">
                                    <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseOneView" aria-expanded="true" aria-controls="panelsStayOpen-collapseOneView">
                                        ข้อมูลคนกู้
                                    </button>
                                </h2>
                                <div id="panelsStayOpen-collapseOneView" class="accordion-collapse collapse show" aria-labelledby="panelsStayOpen-headingOneView">
                                    <div class="accordion-body">
                                        <form>
                                            <div class="form-row">
                                                <div class="container-fluid">
                                                    <div class="row">
                                                        <div class="col-md-6 pb-3">
                                                            <label for="viewfirstname">ชื่อ</label>
                                                            <input type="text" class="form-control form-control-sm" id="viewfirstname" placeholder="ชื่อ" readonly>
                                                        </div>
                                                        <div class="col-md-6 pb-3">
                                                            <label for="viewlastname">นามสกุล</label>
                                                            <input type="text" class="form-control form-control-sm" id="viewlastname" placeholder="นามสกุล" readonly>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-row">
                                                <div class="container-fluid">
                                                    <div class="row">
                                                        <div class="col-md-6 pb-3">
                                                            <label for="viewnickname">ชื่อเล่น</label>
                                                            <input type="text" class="form-control form-control-sm" id="viewnickname" placeholder="ชื่อเล่น" readonly>
                                                        </div>
                                                        <div class="col-md-6 pb-3">
                                                            <label for="viewidcard">เลขบัตรประจำตัวประชาชน</label>
                                                            <input type="text" class="form-control form-control-sm" id="viewidcard" placeholder="เลขบัตรประจำตัวประชาชน" readonly>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-row">
                                                <div class="container-fluid">
                                                    <div class="row">
                                                        <div class="col-md-6 pb-3">
                                                            <label for="viewphone1">เบอร์โทร 1</label>
                                                            <input type="text" class="form-control form-control-sm" id="viewphone1" placeholder="เบอร์โทร 1" readonly>
                                                        </div>
                                                        <div class="col-md-6 pb-3">
                                                            <label for="viewphone2">เบอร์โทร 2</label>
                                                            <input type="text" class="form-control form-control-sm" id="viewphone2" placeholder="เบอร์โทร 2" readonly>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            @if (ViewBag.UserAccess == StatusUserAccess.UserAccess_Superadmin.ToString())
                                            {
                                                <div class="form-row">
                                                    <div class="container-fluid">
                                                        <div class="row">
                                                            <div class="col-md-6 pb-3">
                                                                <label for="viewhouse">บ้าน</label>
                                                                <input type="text" class="form-control form-control-sm" id="viewhouse" placeholder="" readonly>
                                                            </div>
                                                            <div class="col-md-6 pb-3">
                                                                <label for="viewcustomerline">สาย</label>
                                                                <input type="text" class="form-control form-control-sm" id="viewcustomerline" placeholder="" readonly>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            }
                                            else if (ViewBag.UserAccess == StatusUserAccess.UserAccess_Admin.ToString())
                                            {
                                                <div class="form-row">
                                                    <div class="container-fluid">
                                                        <div class="row">
                                                            <div class="col-md-6 pb-3">
                                                                <label for="viewcustomerline">สาย</label>
                                                                <input type="text" class="form-control form-control-sm" id="viewcustomerline" placeholder="" readonly>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            }
                                            <div class="form-row">
                                                <div class="container-fluid">
                                                    <div class="row">
                                                        <div class="col-md-6 pb-3">
                                                            <label for="viewaddress">สถานที่</label>
                                                            <input type="text" class="form-control form-control-sm" id="viewaddress" placeholder="สถานที่" readonly>
                                                        </div>
                                                        <div class="col-md-6 pb-3">
                                                            <label for="viewshortaddress">สถานที่ย่อ</label>
                                                            <input type="text" class="form-control form-control-sm" id="viewshortaddress" placeholder="สถานที่" readonly>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-row">
                                                <div class="container-fluid">
                                                    <div class="row">
                                                        <div class="col-md-6 pb-3">
                                                            <input type="radio" id="viewstatus1" name="viewstatus" value="1" disabled>
                                                            <label for="viewstatus1">ดี</label>
                                                            <input type="radio" id="viewstatus2" name="viewstatus" value="2" disabled>
                                                            <label for="viewstatus2">แย่</label>
                                                            <input type="radio" id="viewstatus3" name="viewstatus" value="3" disabled>
                                                            <label for="viewstatus3">เสีย</label>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-row">
                                                <div class="container-fluid">
                                                    <div class="row">
                                                        <div class="col pb-3">
                                                            <label for="inputEmail4">รูปบัตรประชาชน</label>
                                                            <img src="~/lib/images/user.png" style="width:80px;" class="mx-auto d-block">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="panelsStayOpen-headingTwoView">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseTwoView" aria-expanded="false" aria-controls="panelsStayOpen-collapseTwoView">
                                        ข้อมูลคนค้ำ
                                    </button>
                                </h2>
                                <div id="panelsStayOpen-collapseTwoView" class="accordion-collapse collapse" aria-labelledby="panelsStayOpen-headingTwoView">
                                    <div class="accordion-body">
                                        <form>
                                            <div class="form-row">
                                                <div class="container-fluid">
                                                    <div class="row">
                                                        <div class="col-md-6 pb-3">
                                                            <label for="viewfirstname">ชื่อ</label>
                                                            <input type="text" class="form-control form-control-sm" id="viewgfirstname" placeholder="ชื่อ" readonly>
                                                        </div>
                                                        <div class="col-md-6 pb-3">
                                                            <label for="viewlastname">นามสกุล</label>
                                                            <input type="text" class="form-control form-control-sm" id="viewglastname" placeholder="นามสกุล" readonly>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-row">
                                                <div class="container-fluid">
                                                    <div class="row">
                                                        <div class="col-md-6 pb-3">
                                                            <label for="viewnickname">ชื่อเล่น</label>
                                                            <input type="text" class="form-control form-control-sm" id="viewgnickname" placeholder="ชื่อเล่น" readonly>
                                                        </div>
                                                        <div class="col-md-6 pb-3">
                                                            <label for="viewidcard">เลขบัตรประจำตัวประชาชน</label>
                                                            <input type="text" class="form-control form-control-sm" id="viewgidcard" placeholder="เลขบัตรประจำตัวประชาชน" readonly>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-row">
                                                <div class="container-fluid">
                                                    <div class="row">
                                                        <div class="col-md-6 pb-3">
                                                            <label for="viewphone1">เบอร์โทร 1</label>
                                                            <input type="text" class="form-control form-control-sm" id="viewgphone1" placeholder="เบอร์โทร 1" readonly>
                                                        </div>
                                                        <div class="col-md-6 pb-3">
                                                            <label for="viewphone2">เบอร์โทร 2</label>
                                                            <input type="text" class="form-control form-control-sm" id="viewgphone2" placeholder="เบอร์โทร 2" readonly>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            @if (ViewBag.UserAccess == StatusUserAccess.UserAccess_Superadmin.ToString())
                                            {
                                                <div class="form-row">
                                                    <div class="container-fluid">
                                                        <div class="row">
                                                            <div class="col-md-6 pb-3">
                                                                <label for="viewhouse">บ้าน</label>
                                                                <input type="text" class="form-control form-control-sm" id="viewghouse" placeholder="" readonly>
                                                            </div>
                                                            <div class="col-md-6 pb-3">
                                                                <label for="viewcustomerline">สาย</label>
                                                                <input type="text" class="form-control form-control-sm" id="viewgcustomerline" placeholder="" readonly>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            }
                                            else if (ViewBag.UserAccess == StatusUserAccess.UserAccess_Admin.ToString())
                                            {
                                                <div class="form-row">
                                                    <div class="container-fluid">
                                                        <div class="row">
                                                            <div class="col-md-6 pb-3">
                                                                <label for="viewcustomerline">สาย</label>
                                                                <input type="text" class="form-control form-control-sm" id="viewgcustomerline" placeholder="" readonly>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            }
                                            <div class="form-row">
                                                <div class="container-fluid">
                                                    <div class="row">
                                                        <div class="col-md-6 pb-3">
                                                            <label for="viewaddress">สถานที่</label>
                                                            <input type="text" class="form-control form-control-sm" id="viewgaddress" placeholder="สถานที่" readonly>
                                                        </div>
                                                        <div class="col-md-6 pb-3">
                                                            <label for="viewshortaddress">สถานที่ย่อ</label>
                                                            <input type="text" class="form-control form-control-sm" id="viewgshortaddress" placeholder="สถานที่" readonly>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-row">
                                                <div class="container-fluid">
                                                    <div class="row">
                                                        <div class="col-md-6 pb-3">
                                                            <input type="radio" id="viewgstatus1" name="viewgstatus" value="1" disabled>
                                                            <label for="viewgstatus1">ดี</label>
                                                            <input type="radio" id="viewgstatus2" name="viewgstatus" value="2" disabled>
                                                            <label for="viewgstatus2">แย่</label>
                                                            <input type="radio" id="viewgstatus3" name="viewgstatus" value="3" disabled>
                                                            <label for="viewgstatus3">เสีย</label>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-row">
                                                <div class="container-fluid">
                                                    <div class="row">
                                                        <div class="col pb-3">
                                                            <label for="inputEmail4">รูปบัตรประชาชน</label>
                                                            <img src="~/lib/images/user.png" style="width:80px;" class="mx-auto d-block">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="panelsStayOpen-headingThreeView">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseThreeView" aria-expanded="false" aria-controls="panelsStayOpen-collapseThreeView">
                                        ข้อมูลสัญญา
                                    </button>
                                </h2>
                                <div id="panelsStayOpen-collapseThreeView" class="accordion-collapse collapse" aria-labelledby="panelsStayOpen-headingThreeView">
                                    <div class="accordion-body">
                                        <div class="form-row">
                                            <div class="container-fluid">
                                                <div class="row">
                                                    <div class="col-md-6 pb-3">
                                                        <label for="viewcondate">วันที่</label>
                                                        <input type="text" class="form-control form-control-sm" id="viewcondate" placeholder="วันที่" readonly>
                                                    </div>
                                                    <div class="col-md-6 pb-3">
                                                        <label for="viewconamout">ยอดเงินขอกู้</label>
                                                        <input type="text" class="form-control form-control-sm" id="viewconamount" placeholder="ยอดเงินขอกู้" readonly>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-row">
                                            <div class="container-fluid">
                                                <div class="row">
                                                    <div id="imgview" class="col pb-3">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-row">
                                            <div class="container-fluid">
                                                <div class="row">
                                                    <div class="col-md-6 pb-3">
                                                        <label for="viewconstatus">สถานะสัญญา</label>
                                                        <input type="text" class="form-control form-control-sm" id="viewconstatus" placeholder="สถานนะสัญญา" readonly>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <!-- Modal footer -->
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-bs-dismiss="modal">ปิด</button>
            </div>

        </div>
    </div>
</div>
<!-- The Modal editcontract -->
<div class="modal" id="editcontract">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <!-- Modal Header -->
            <div class="modal-header" style="background-color:#ff9800;color:#000;">
                <h4 class="modal-title">แก้ไขสัญญากู้</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <!-- Modal body -->
            <div class="modal-body">
                <form>
                    <div class="card-body bg-light p-3 rounded ">
                        <div class="input-group mb-3 input-group-sm">
                            <select class="form-select form-select-sm" id="editcustype" name="editcustype" style="width: 90px !important; min-width:90px; max-width: 90px;">
                                <option value="1">คนกู้</option>
                                <option value="2">คนค้ำ</option>
                            </select>
                            <input type="text" class="form-control" id="editidcardsearch" placeholder="เลขบัตรประชาชน">
                            <input type="text" class="form-control" id="editnamesearch" placeholder="ชื่อ-นามสกุล">
                            <button type="button" class="btn btn-info btn-sm" id="editsearch">
                                <i class="fa fa-search"></i>
                                ค้นหา
                            </button>
                        </div>
                        <div class="accordion" id="editsearchpanel">
                            <div class="accordion-item">
                                <div id="editsearchpanelchild" class="accordion-collapse collapse" aria-labelledby="editsearchitem">
                                    <!--
                                    <div id="editsearchitem" class="accordion-body">

                                    </div>-->
                                    <label for="inputEmail4">เลือกลูกค้า</label>
                                    <select class="form-select form-select-sm" id="editsearchitem" name="editsearchitem">
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="accordion" id="accordionPanelsStayOpenExampleEdit">
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="panelsStayOpen-headingOneEdit">
                                    <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseOneEdit" aria-expanded="true" aria-controls="panelsStayOpen-collapseOneEdit">
                                        ข้อมูลคนกู้
                                    </button>
                                </h2>
                                <div id="panelsStayOpen-collapseOneEdit" class="accordion-collapse collapse show" aria-labelledby="panelsStayOpen-headingOneEdit">
                                    <div class="accordion-body">
                                        <form>
                                            <div class="form-row">
                                                <div class="container-fluid">
                                                    <div class="row">
                                                        <div class="col-md-6 pb-3">
                                                            <input type="hidden" id="editcid" />
                                                            <label for="editfirstname">ชื่อ</label>
                                                            <input type="text" class="form-control form-control-sm" id="editfirstname" placeholder="ชื่อ" readonly>
                                                        </div>
                                                        <div class="col-md-6 pb-3">
                                                            <label for="editlastname">นามสกุล</label>
                                                            <input type="text" class="form-control form-control-sm" id="editlastname" placeholder="นามสกุล" readonly>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-row">
                                                <div class="container-fluid">
                                                    <div class="row">
                                                        <div class="col-md-6 pb-3">
                                                            <label for="editnickname">ชื่อเล่น</label>
                                                            <input type="text" class="form-control form-control-sm" id="editnickname" placeholder="ชื่อเล่น" readonly>
                                                        </div>
                                                        <div class="col-md-6 pb-3">
                                                            <label for="editidcard">เลขบัตรประจำตัวประชาชน</label>
                                                            <input type="text" class="form-control form-control-sm" id="editidcard" placeholder="เลขบัตรประจำตัวประชาชน" readonly>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-row">
                                                <div class="container-fluid">
                                                    <div class="row">
                                                        <div class="col-md-6 pb-3">
                                                            <label for="editphone1">เบอร์โทร 1</label>
                                                            <input type="text" class="form-control form-control-sm" id="editphone1" placeholder="เบอร์โทร 1" readonly>
                                                        </div>
                                                        <div class="col-md-6 pb-3">
                                                            <label for="editphone2">เบอร์โทร 2</label>
                                                            <input type="text" class="form-control form-control-sm" id="editphone2" placeholder="เบอร์โทร 2" readonly>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            @if (ViewBag.UserAccess == StatusUserAccess.UserAccess_Superadmin.ToString())
                                            {
                                                <div class="form-row">
                                                    <div class="container-fluid">
                                                        <div class="row">
                                                            <div class="col-md-6 pb-3">
                                                                <label for="edithouse">บ้าน</label>
                                                                <input type="text" class="form-control form-control-sm" id="edithouse" placeholder="" readonly>
                                                            </div>
                                                            <div class="col-md-6 pb-3">
                                                                <label for="editcustomerline">สาย</label>
                                                                <input type="text" class="form-control form-control-sm" id="editcustomerline" placeholder="" readonly>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            }
                                            else if (ViewBag.UserAccess == StatusUserAccess.UserAccess_Admin.ToString())
                                            {
                                                <div class="form-row">
                                                    <div class="container-fluid">
                                                        <div class="row">
                                                            <div class="col-md-6 pb-3">
                                                                <label for="editcustomerline">สาย</label>
                                                                <input type="text" class="form-control form-control-sm" id="editcustomerline" placeholder="" readonly>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            }
                                            <div class="form-row">
                                                <div class="container-fluid">
                                                    <div class="row">
                                                        <div class="col-md-6 pb-3">
                                                            <label for="editaddress">สถานที่</label>
                                                            <input type="text" class="form-control form-control-sm" id="editaddress" placeholder="สถานที่" readonly>
                                                        </div>
                                                        <div class="col-md-6 pb-3">
                                                            <label for="editshortaddress">สถานที่ย่อ</label>
                                                            <input type="text" class="form-control form-control-sm" id="editshortaddress" placeholder="สถานที่" readonly>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-row">
                                                <div class="container-fluid">
                                                    <div class="row">
                                                        <div class="col-md-6 pb-3">
                                                            <input type="radio" id="editstatus1" name="editstatus" value="1" disabled>
                                                            <label for="editstatus1">ดี</label>
                                                            <input type="radio" id="editstatus2" name="editstatus" value="2" disabled>
                                                            <label for="editstatus2">แย่</label>
                                                            <input type="radio" id="editstatus3" name="editstatus" value="3" disabled>
                                                            <label for="editstatus3">เสีย</label>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-row">
                                                <div class="container-fluid">
                                                    <div class="row">
                                                        <div class="col pb-3">
                                                            <label for="inputEmail4">รูปบัตรประชาชน</label>
                                                            <img src="~/lib/images/user.png" style="width:80px;" class="mx-auto d-block">
                                                        </div>

                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="panelsStayOpen-headingTwoEdit">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseTwoEdit" aria-expanded="false" aria-controls="panelsStayOpen-collapseTwoEdit">
                                        ข้อมูลคนค้ำ
                                    </button>
                                </h2>
                                <div id="panelsStayOpen-collapseTwoEdit" class="accordion-collapse collapse" aria-labelledby="panelsStayOpen-headingTwoEdit">
                                    <div class="accordion-body">
                                        <form>
                                            <div class="form-row">
                                                <div class="container-fluid">
                                                    <div class="row">
                                                        <div class="col-md-6 pb-3">
                                                            <input type="hidden" id="editgid" />
                                                            <label for="editfirstname">ชื่อ</label>
                                                            <input type="text" class="form-control form-control-sm" id="editgfirstname" placeholder="ชื่อ" readonly>
                                                        </div>
                                                        <div class="col-md-6 pb-3">
                                                            <label for="editlastname">นามสกุล</label>
                                                            <input type="text" class="form-control form-control-sm" id="editglastname" placeholder="นามสกุล" readonly>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-row">
                                                <div class="container-fluid">
                                                    <div class="row">
                                                        <div class="col-md-6 pb-3">
                                                            <label for="editnickname">ชื่อเล่น</label>
                                                            <input type="text" class="form-control form-control-sm" id="editgnickname" placeholder="ชื่อเล่น" readonly>
                                                        </div>
                                                        <div class="col-md-6 pb-3">
                                                            <label for="editidcard">เลขบัตรประจำตัวประชาชน</label>
                                                            <input type="text" class="form-control form-control-sm" id="editgidcard" placeholder="เลขบัตรประจำตัวประชาชน" readonly>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-row">
                                                <div class="container-fluid">
                                                    <div class="row">
                                                        <div class="col-md-6 pb-3">
                                                            <label for="editphone1">เบอร์โทร 1</label>
                                                            <input type="text" class="form-control form-control-sm" id="editgphone1" placeholder="เบอร์โทร 1" readonly>
                                                        </div>
                                                        <div class="col-md-6 pb-3">
                                                            <label for="editphone2">เบอร์โทร 2</label>
                                                            <input type="text" class="form-control form-control-sm" id="editgphone2" placeholder="เบอร์โทร 2" readonly>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            @if (ViewBag.UserAccess == StatusUserAccess.UserAccess_Superadmin.ToString())
                                            {
                                                <div class="form-row">
                                                    <div class="container-fluid">
                                                        <div class="row">
                                                            <div class="col-md-6 pb-3">
                                                                <label for="edithouse">บ้าน</label>
                                                                <input type="text" class="form-control form-control-sm" id="editghouse" placeholder="" readonly>
                                                            </div>
                                                            <div class="col-md-6 pb-3">
                                                                <label for="editcustomerline">สาย</label>
                                                                <input type="text" class="form-control form-control-sm" id="editgcustomerline" placeholder="" readonly>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            }
                                            else if (ViewBag.UserAccess == StatusUserAccess.UserAccess_Admin.ToString())
                                            {
                                                <div class="form-row">
                                                    <div class="container-fluid">
                                                        <div class="row">
                                                            <div class="col-md-6 pb-3">
                                                                <label for="editcustomerline">สาย</label>
                                                                <input type="text" class="form-control form-control-sm" id="editgcustomerline" placeholder="" readonly>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            }
                                            <div class="form-row">
                                                <div class="container-fluid">
                                                    <div class="row">
                                                        <div class="col-md-6 pb-3">
                                                            <label for="editaddress">สถานที่</label>
                                                            <input type="text" class="form-control form-control-sm" id="editgaddress" placeholder="สถานที่" readonly>
                                                        </div>
                                                        <div class="col-md-6 pb-3">
                                                            <label for="editshortaddress">สถานที่ย่อ</label>
                                                            <input type="text" class="form-control form-control-sm" id="editgshortaddress" placeholder="สถานที่" readonly>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-row">
                                                <div class="container-fluid">
                                                    <div class="row">
                                                        <div class="col-md-6 pb-3">
                                                            <input type="radio" id="editgstatus1" name="editgstatus" value="1" disabled>
                                                            <label for="editgstatus1">ดี</label>
                                                            <input type="radio" id="editgstatus2" name="editgstatus" value="2" disabled>
                                                            <label for="editgstatus2">แย่</label>
                                                            <input type="radio" id="editgstatus3" name="editgstatus" value="3" disabled>
                                                            <label for="editgstatus3">เสีย</label>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-row">
                                                <div class="container-fluid">
                                                    <div class="row">
                                                        <div class="col pb-3">
                                                            <label for="inputEmail4">รูปบัตรประชาชน</label>
                                                            <img src="~/lib/images/user.png" style="width:80px;" class="mx-auto d-block">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="panelsStayOpen-headingThreeEdit">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseThreeEdit" aria-expanded="false" aria-controls="panelsStayOpen-collapseThreeEdit">
                                        ข้อมูลสัญญา
                                    </button>
                                </h2>
                                <div id="panelsStayOpen-collapseThreeEdit" class="accordion-collapse collapse" aria-labelledby="panelsStayOpen-headingThreeEdit">
                                    <div class="accordion-body">
                                        <div class="form-row">
                                            <div class="container-fluid">
                                                <div class="row">
                                                    <div class="col-md-6 pb-3">
                                                        <label for="editcondate">วันที่</label>
                                                        <input type="text" class="form-control form-control-sm" id="editcondate" placeholder="วันที่" readonly>
                                                    </div>
                                                    <div class="col-md-6 pb-3">
                                                        <label for="editconamount">ยอดเงินขอกู้</label>
                                                        <input type="text" class="form-control form-control-sm" id="editconamount" placeholder="ยอดเงินขอกู้">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-row">
                                            <div class="container-fluid">
                                                <div class="row">
                                                    <div class="col-md-6 pb-3">
                                                        <label for="editconstatus">สถานะสัญญา</label>
                                                        <input type="text" class="form-control form-control-sm" id="editconstatus" placeholder="สถานะสัญญา" readonly>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-row">
                                            <div class="container-fluid">
                                                <div class="row">
                                                    <div class="col pb-3">
                                                        <label for="inputEmail4">รูปหลักฐาน</label>
                                                        <form enctype="multipart/form-data">
                                                            <div class="file-loading">
                                                                <input id="uploadfile1" name="uploadfile1" class="file" type="file" multiple>
                                                            </div>
                                                        </form>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <input type="hidden" id="editid" />
            <!-- Modal footer -->
            <div class="modal-footer">
                <button type="button" class="btn btn-success" onclick="save()" data-bs-dismiss="modal">บันทึก</button>
                <button type="button" class="btn btn-danger" data-bs-dismiss="modal">ปิด</button>
            </div>
        </div>
    </div>
</div>
<!--end -->
<table class="table table-hover" style="text-align: center; vertical-align: middle;">
    <thead>
        <tr>
            <th scope="col">#</th>
            <th scope="col">เลขที่สัญญา</th>
            <th scope="col">ชื่อ</th>
            <th scope="col">นามสกุล</th>
            <th scope="col">สถานที่</th>
            <th scope="col">สถานะ</th>
            @if (ViewBag.UserAccess == StatusUserAccess.UserAccess_Superadmin.ToString())
            {
                <th scope="col">บ้าน</th>
            }
            @if (int.Parse(ViewBag.UserAccess) <= StatusUserAccess.UserAccess_Audit)
            {
                <th scope="col">สาย</th>
            }
            <th scope="col"></th>
        </tr>
    </thead>
    <tbody>
        @if (ViewBag.PageData.Count > 0)
        {
            foreach (var items in ViewBag.PageData)
            {
                <tr class='clickable-row'>
                    <th scope="row">@items.Id</th>
                    <td>@items.ContractId</td>
                    <td>@items.Customer.Firstname</td>
                    <td>@items.Customer.Lastname</td>
                    <td>@items.Customer.Address</td>
                    <td>@items.StatusText</td>
                    @if (ViewBag.UserAccess == StatusUserAccess.UserAccess_Superadmin.ToString())
                    {
                        <td>@items.Customer.HouseText</td>
                    }
                    @if (int.Parse(ViewBag.UserAccess) <= StatusUserAccess.UserAccess_Audit)
                    {
                        <td>@items.Customer.CustomerLineText</td>
                    }
                    <td>
                        <button type="button" class="btn btn-primary btn-sm btn-view" data-bs-toggle="modal" data-bs-target="#viewcontract">
                            <i class="fa fa-eye"></i>
                            ดู
                        </button>
                        @if (int.Parse(ViewBag.UserAccess) <= StatusUserAccess.UserAccess_Admin)
                        {
                            <button type="button" class="btn btn-warning btn-sm btn-edit" data-bs-toggle="modal" data-bs-target="#editcontract">
                                <i class="fa fa-pen-square"></i>
                                แก้ไข
                            </button>
                        }
                        @if (int.Parse(ViewBag.UserAccess) == StatusUserAccess.UserAccess_Agent && ContractStatus.StatusContract_WaitConfirm == items.Status)
                        {
                            <button type="button" class="btn btn-warning btn-sm btn-editcontractwait" data-bs-toggle="modal" data-bs-target="#editcontractwait">
                                <i class="fa fa-pen-square"></i>
                                แก้ไข
                            </button>
                        }
                        @if (int.Parse(ViewBag.UserAccess) == StatusUserAccess.UserAccess_Agent && ContractStatus.StatusContract_Normal == items.Status)
                        {
                            <button type="button" class="btn btn-warning btn-sm btn-editcontractnormal" data-bs-toggle="modal" data-bs-target="#editcontractnormal">
                                <i class="fa fa-pen-square"></i>
                                แก้ไข
                            </button>
                        }
                        @if (int.Parse(ViewBag.UserAccess) <= StatusUserAccess.UserAccess_Admin)
                        {
                            <button type="button" class="btn btn-danger btn-sm btn-delete" data-bs-toggle="modal" data-bs-target="#delcontract">
                                <i class="fa fa-trash-alt"></i>
                                ลบ
                            </button>
                        }
                    </td>
                </tr>
            }
        }
    </tbody>
</table>
<!-- The Modal deletecustomer -->
<div class="modal" id="delcontract">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <!-- Modal Header -->
            <div class="modal-header" style="background-color:red;color:#fff;">
                <h4 class="modal-title">ลบข้อมูล</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <!-- Modal body -->
            <div class="modal-body">
                <form>
                    <h5>คุณต้องการลบข้อมูลสัญญาเลขที่ <span id="deletename"></span> ใช่หรือไม่?</h5>
                </form>
            </div>
            <!-- Modal footer -->
            <div class="modal-footer">
                <button type="button" id="delete" class="btn btn-danger" data-bs-dismiss="modal">ลบ</button>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ปิด</button>
            </div>
            <input type="hidden" id="deleteid" />
        </div>
    </div>
</div>
<!--end -->
<nav aria-label="Page navigation">
    <ul class="pagination ">
        <li class="page-item"><a class="page-link" href="#">ก่อนหน้า</a></li>
        <li class="page-item active"><a class="page-link" href="#">1</a></li>
        <li class="page-item"><a class="page-link" href="#">2</a></li>
        <li class="page-item"><a class="page-link" href="#">3</a></li>
        <li class="page-item"><a class="page-link" href="#">ถัดไป</a></li>
    </ul>
</nav>
<input type="hidden" id="uploaded0" />
<input type="hidden" id="uploaded1" />
<input type="hidden" id="uploaded2" />
<input type="hidden" id="uploaded3" />
<input type="hidden" id="uploaded4" />
<input type="hidden" id="uploaded5" />
<input type="hidden" id="uploaded6" />
<input type="hidden" id="uploaded7" />
<input type="hidden" id="uploaded8" />
<input type="hidden" id="uploaded9" />
<form id="searchform" style="display:none;" method="POST" action="/SearchContract">
    <input type="text" id="ffirstname" name="Firstname">
    <input type="text" id="flastname" name="Lastname">
    <input type="text" id="faddress" name="Address">
    <input type="text" id="fidcard" name="Idcard">
</form>
<script type="text/javascript">
    var root = '@Url.Content("~/")';
    var useraccess = '@ViewBag.UserAccess';
    var superadmin = '@StatusUserAccess.UserAccess_Superadmin';
    var admin = '@StatusUserAccess.UserAccess_Admin';
    var audit = '@StatusUserAccess.UserAccess_Audit';
    var agent = '@StatusUserAccess.UserAccess_Agent';
    root = (root == '/' ? "" : root);
    function search() {
        let req = new XMLHttpRequest();
        let formData = new FormData();

        $("#ffirstname").val($("#searchfname").val());
        $("#flastname").val($("#searchlname").val());
        $("#faddress").val($("#searchaddress").val());
        $("#fidcard").val($("#searchidcard").val());
        document.getElementById("searchform").submit();
    }
    function dateStr(dat) {
        var arr = dat.split('T');
        var da = arr[0].split('-');
        //var ti = arr[1].split('.');
        return da[2]+'/'+da[1]+'/'+da[0]
    }
    function save() {
        $("#uploadfile1").fileinput("upload");
    }
    function saveadd() {
        let req = new XMLHttpRequest();
        let formData = new FormData();

        formData.append("isNew", true);
        formData.append("CustomerId", $("#addcid").val());
        formData.append("GuarantorId", $("#addgid").val());
        formData.append("TotalAmount", $("#addconamount").val());
        req.open("POST", '/AddContract');
        req.send(formData);
        req.onload = function () {
            if (req.readyState != 4 || req.status != 200) {
                $("#msg").text(req.responseText)
            } else {
                alert(req.responseText);
                location.reload();
            }
        }
    }
    var arr = null;
    function removeShow(mode, i) {
        var data = arr[i];
        if (mode == 'edit') {
            $('#editsearchpanelchild').removeClass('show');
            $('#editsearchitem').empty();
            if ($('#editcustype').val() == '1') {
                $("#edithouse").val(data.houseText);
                $("#editidcard").val(data.idcard);
                $("#editfirstname").val(data.firstname);
                $("#editlastname").val(data.lastname);
                $("#editnickname").val(data.nickname);
                $("#editphone1").val(data.phone1);
                $("#editphone2").val(data.phone2);
                $("#editaddress").val(data.address);
                if (data.status == 1)
                    $("#editstatus1").prop('checked', true);
                else if (data.status == 2)
                    $("#editstatus2").prop('checked', true);
                else if (data.status == 3)
                    $("#editstatus3").prop('checked', true);
                $("#editcustomerline").val(data.customerLineText);
                $("#editshortaddress").val(data.shortAddress);
                $("#editcid").val(data.id);
            } else {
                $("#editghouse").val(data.houseText);
                $("#editgidcard").val(data.idcard);
                $("#editgfirstname").val(data.firstname);
                $("#editglastname").val(data.lastname);
                $("#editgnickname").val(data.nickname);
                $("#editgphone1").val(data.phone1);
                $("#editgphone2").val(data.phone2);
                $("#editgaddress").val(data.address);
                $("#editgshortaddress").val(data.shortAddress);
                if (data.status == 1)
                    $("#editgstatus1").prop('checked', true);
                else if (data.status == 2)
                    $("#editgstatus2").prop('checked', true);
                else if (data.status == 3)
                    $("#editgstatus3").prop('checked', true);
                $("#editgcustomerline").val(data.customerLineText);
                $("#editgid").val(data.id);
            }
        } else {
            $('#addsearchpanelchild').removeClass('show');
            $('#addsearchitem').empty();
            if ($('#addcustype').val() == '1') {
                $("#addhouse").val(data.houseText);
                $("#addidcard").val(data.idcard);
                $("#addfirstname").val(data.firstname);
                $("#addlastname").val(data.lastname);
                $("#addnickname").val(data.nickname);
                $("#addphone1").val(data.phone1);
                $("#addphone2").val(data.phone2);
                $("#addaddress").val(data.address);
                if (data.status == 1)
                    $("#addstatus1").prop('checked', true);
                else if (data.status == 2)
                    $("#addstatus2").prop('checked', true);
                else if (data.status == 3)
                    $("#addstatus3").prop('checked', true);
                $("#addcustomerline").val(data.customerLineText);
                $("#addshortaddress").val(data.shortAddress);

                $("#addcid").val(data.id);
            } else {
                $("#addghouse").val(data.houseText);
                $("#addgidcard").val(data.idcard);
                $("#addgfirstname").val(data.firstname);
                $("#addglastname").val(data.lastname);
                $("#addgnickname").val(data.nickname);
                $("#addgphone1").val(data.phone1);
                $("#addgphone2").val(data.phone2);
                $("#addgaddress").val(data.address);
                $("#addgshortaddress").val(data.shortAddress);
                if (data.status == 1)
                    $("#addgstatus1").prop('checked', true);
                else if (data.status == 2)
                    $("#addgstatus2").prop('checked', true);
                else if (data.status == 3)
                    $("#addgstatus3").prop('checked', true);
                $("#addgcustomerline").val(data.customerLineText);

                $("#addgid").val(data.id);
            }
        }
    }
    $(document).ready(function () {
        /** /
        $('#table').DataTable({
            "info": true,
            "pageLength": 10,
            "bLengthChange": false,
            "initComplete": function() {

            }
        });
        /**/
        $('#editsearchitem').on('change', function () {
            removeShow('edit', $('#editsearchitem').val());
        });
        $('#addsearchitem').on('change', function () {
            removeShow('add', $('#addsearchitem').val());
        });
        if (useraccess == superadmin) {
        }
        $('#addmodal').click(function () {
            var dat = new Date();
            var datstr = ('0' + dat.getDate()).slice(-2) + '/' + ('0' + (dat.getMonth()+1)).slice(-2) + '/' + dat.getFullYear();
            $('#addcondate').val(datstr);
            $('#addconamount').val();
            $("#addhouse").val();
            $("#addidcard").val();
            $("#addfirstname").val();
            $("#addlastname").val();
            $("#addnickname").val();
            $("#addphone1").val();
            $("#addphone2").val();
            $("#addaddress").val();
            $("#addstatus1").prop('checked', true);
            $("#addcustomerline").val();
            $("#addshortaddress").val();
            $("#addghouse").val();
            $("#addgidcard").val();
            $("#addgfirstname").val();
            $("#addglastname").val();
            $("#addgnickname").val();
            $("#addgphone1").val();
            $("#addgphone2").val();
            $("#addgaddress").val();
            $("#addgshortaddress").val();
            $("#addgstatus1").prop('checked', true);
            $("#addgcustomerline").val();
        });
        $('#editsearch').click(function () {
            let req = new XMLHttpRequest();
            let formData = new FormData();

            formData.append("Idcard", $("#editidcardsearch").val());
            formData.append("Name", $("#editnamesearch").val());
            req.open("POST", '/SearchCustomer');
            req.send(formData);
            req.onload = function () {
                if (req.readyState != 4 || req.status != 200) {
                    $("#msg").text(req.responseText)
                } else {
                    console.log(req.responseText);
                    arr = JSON.parse(req.responseText);
                    $('#editsearchitem').empty();
                    $('#editsearchitem').append('<option value="0">-</option>');
                    for (var i = 0; i < arr.length; i++) {
                        /*var tmp = '<div><p>' + arr[i].firstname + ' ' + arr[i].lastname + '</p>';
                        tmp += '<button type="button" class="btn" onclick="removeShow(\'edit\',' + i + ');">เลือก</button>';
                        tmp += '</div>';
                        ('#editsearchitem').append(tmp);*/
                        $('#editsearchitem').append('<option value="' + i + '">' + arr[i].firstname + ' ' + arr[i].lastname + '</option>');
                    }
                    $('#editsearchpanelchild').addClass('show');
                    var data = JSON.parse(req.responseText);

                }
            }
        });
        $('#addsearch').click(function () {
            let req = new XMLHttpRequest();
            let formData = new FormData();

            formData.append("Idcard", $("#addidcardsearch").val());
            formData.append("Name", $("#addnamesearch").val());
            req.open("POST", '/SearchCustomer');
            req.send(formData);
            req.onload = function () {
                if (req.readyState != 4 || req.status != 200) {
                    $("#msg").text(req.responseText)
                } else {
                    console.log(req.responseText);
                    arr = JSON.parse(req.responseText);
                    $('#addsearchitem').empty();
                    $('#addsearchitem').append('<option value="0">-</option>');
                    for (var i = 0; i < arr.length; i++) {
                        /*var tmp = '<div><p>' + arr[i].firstname +' '+arr[i].lastname+'</p>';
                        tmp += '<button type="button" class="btn" onclick="removeShow(\'add\',' + i + ');">เลือก</button>';
                        tmp += '</div>';
                        $('#addsearchitem').append(tmp);*/
                        $('#addsearchitem').append('<option value="' + i + '">' + arr[i].firstname + ' ' + arr[i].lastname + '</option>');
                    }
                    $('#addsearchpanelchild').addClass('show');
                }
            }
        });
        $('table tbody').on('click', '.btn-view', function () {
            $.ajax({
                type: "GET",
                url: root + "/GetContractDetail/" + $(this).closest('tr').find('th').eq(0).text(),
                contentType: "application/json; charset=utf-8;",
                dataType: "json",
                success: function (data) {
                    if (data != undefined) {
                        $("#viewhouse").val(data.customer.houseText);
                        $("#viewidcard").val(data.customer.idcard);
                        $("#viewfirstname").val(data.customer.firstname);
                        $("#viewlastname").val(data.customer.lastname);
                        $("#viewnickname").val(data.customer.nickname);
                        $("#viewphone1").val(data.customer.phone1);
                        $("#viewphone2").val(data.customer.phone2);
                        $("#viewaddress").val(data.customer.address);
                        if (data.customer.status == 1)
                            $("#viewstatus1").prop('checked', true);
                        else if (data.customer.status == 2)
                            $("#viewstatus2").prop('checked', true);
                        else if (data.customer.status == 3)
                            $("#viewstatus3").prop('checked', true);
                        $("#viewcustomerline").val(data.customer.customerLineText);
                        $("#viewshortaddress").val(data.customer.shortAddress);

                        $("#viewghouse").val(data.guaruntor.houseText);
                        $("#viewgidcard").val(data.guaruntor.idcard);
                        $("#viewgfirstname").val(data.guaruntor.firstname);
                        $("#viewglastname").val(data.guaruntor.lastname);
                        $("#viewgnickname").val(data.guaruntor.nickname);
                        $("#viewgphone1").val(data.guaruntor.phone1);
                        $("#viewgphone2").val(data.guaruntor.phone2);
                        $("#viewgaddress").val(data.guaruntor.address);
                        $("#viewgshortaddress").val(data.guaruntor.shortAddress);
                        if (data.guaruntor.status == 1)
                            $("#viewgstatus1").prop('checked', true);
                        else if (data.guaruntor.status == 2)
                            $("#viewgstatus2").prop('checked', true);
                        else if (data.guaruntor.status == 3)
                            $("#viewgstatus3").prop('checked', true);
                        $("#viewgcustomerline").val(data.guaruntor.customerLineText);

                        $("#viewconstatus").val(data.statusText);
                        $("#viewcondate").val(dateStr(data.createDate));
                        $("#viewconamount").val(data.totalAmount);
                        if (data.images != null) {
                            $('<label for="inputEmail4">รูปหลักฐาน</label><br />').appendTo($('#imgview').empty());
                            for (var i in data.images) {
                                $('#imgview').append('<img src="/upload/' + data.images[i] + '" style="width:100px;margin-left:20px;">');
                            }
                        }
                    }
                },
                error: function (e) { console.log(e) }
            });
        });
        $('table tbody').on('click', '.btn-edit', function () {
            $("#editid").val($(this).closest('tr').find('th').eq(0).text());
            $.ajax({
                type: "GET",
                url: root + "/GetContractDetail/" + $(this).closest('tr').find('th').eq(0).text(),
                contentType: "application/json; charset=utf-8;",
                dataType: "json",
                success: function (data) {
                    if (data != undefined) {
                        $("#edithouse").val(data.customer.houseText);
                        $("#editidcard").val(data.customer.idcard);
                        $("#editfirstname").val(data.customer.firstname);
                        $("#editlastname").val(data.customer.lastname);
                        $("#editnickname").val(data.customer.nickname);
                        $("#editphone1").val(data.customer.phone1);
                        $("#editphone2").val(data.customer.phone2);
                        $("#editaddress").val(data.customer.address);
                        if (data.customer.status == 1)
                            $("#editstatus1").prop('checked', true);
                        else if (data.customer.status == 2)
                            $("#editstatus2").prop('checked', true);
                        else if (data.customer.status == 3)
                            $("#editstatus3").prop('checked', true);
                        $("#editcustomerline").val(data.customer.customerLineText);
                        $("#editshortaddress").val(data.customer.shortAddress);

                        $("#editcid").val(data.customer.id);
                        $("#editgid").val(data.guaruntor.id);

                        $("#editghouse").val(data.guaruntor.houseText);
                        $("#editgidcard").val(data.guaruntor.idcard);
                        $("#editgfirstname").val(data.guaruntor.firstname);
                        $("#editglastname").val(data.guaruntor.lastname);
                        $("#editgnickname").val(data.guaruntor.nickname);
                        $("#editgphone1").val(data.guaruntor.phone1);
                        $("#editgphone2").val(data.guaruntor.phone2);
                        $("#editgaddress").val(data.guaruntor.address);
                        $("#editgshortaddress").val(data.guaruntor.shortAddress);
                        if (data.guaruntor.status == 1)
                            $("#editgstatus1").prop('checked', true);
                        else if (data.guaruntor.status == 2)
                            $("#editgstatus2").prop('checked', true);
                        else if (data.guaruntor.status == 3)
                            $("#editgstatus3").prop('checked', true);
                        $("#editgcustomerline").val(data.guaruntor.customerLineText);

                        $("#editconstatus").val(data.statusText);
                        $("#editcondate").val(dateStr(data.createDate));
                        $("#editconamount").val(data.totalAmount);
                    }
                },
                error: function (e) { console.log(e) }
            });
        });
        $('table tbody').on('click', '.btn-delete', function () {
            $("#deleteid").val($(this).closest('tr').find('th').eq(0).text());
            $("#deletename").html($(this).closest('tr').find('td').eq(0).text());
        });
        $("#delete").click(function () {
            let req = new XMLHttpRequest();
            req.open("GET", '/DeleteContract/' + $("#deleteid").val());
            req.send();
            req.onload = function () {
                if (req.readyState != 4 || req.status != 200) {
                    $("#msg").text(req.responseText)
                } else {
                    alert(req.responseText);
                    location.reload();
                }
            }
        });
    });
    $("#uploadfile1").fileinput({
        language: "th",
        theme: 'fas',
        showCaption: false,
        showPreview: true,
        showUpload: true,
        uploadAsync: false,
        showCancel: false,
        dropZoneEnabled: true,
        browseOnZoneClick: true,
        minFileCount: 1,
        maxFileCount: 10,
        allowedFileTypes: ['image'],
        allowedFileExtensions: ["jpg", "png", "jpeg"],
        initialPreviewAsData: true,
        overwriteInitial: true,
        uploadUrl: '/UploadFileContract',
        deleteUrl: "/delete"
    }).on('fileuploaderror', function (event, data, msg) {
        console.log('File Upload Error', 'ID: ' + data.fileId + ', Thumb ID: ' + data.previewId, msg);
    }).on('filebatchuploadsuccess', function (event, data) {
        var form = data.form, files = data.files, extra = data.extra,
            response = data.response, reader = data.reader;
        if (!response.error) {
            let req = new XMLHttpRequest();
            let formData = new FormData();
            formData.append("isNew", false);
            formData.append("Id", $("#editid").val());
            formData.append("CustomerId", $("#editcid").val());
            formData.append("GuarantorId", $("#editgid").val());
            formData.append("TotalAmount", $("#editconamount").val());
            for (var i in response.filename) {
                $('#uploaded' + i).val(response.filename[i]);
                formData.append("uploaded" + i, response.filename[i]);
            }
            req.open("POST", '/EditContract');
            req.send(formData);
            req.onload = function () {
                if (req.readyState != 4 || req.status != 200) {
                    $("#msg").text(req.responseText)
                } else {
                    alert(req.responseText);
                    location.reload();
                }
            }
        }
    });
</script>